### CH15 문자열

- UTF-8, rune type, 문자열 구조, immutable
    1. UTF-8 문자코드
        - go는 UTF-8 문자코드를 표준 문자코드로 사용합니다. UTF-8은 다국어 문자를 지원하고 문자열 크기를 절약할 목적으로 Go 언어 창시자인 롭 파이크와 켄 톰슨이 고안한 문자코드입니다.
        - UTF-16이 한 문자에 2바이트를 고정 사용하는 것과 달리 UTF-8은 자주 사용되는 영문자, 숫자, 일부 특수 문자를 1바이트로 표현하고 그외 다른 문자들은 2~3바이트로 표현합니다.
        - 영문자, 숫자 등을 1바이트로 표현해 UTF-16에 비해 크기를 절약할 수 있고, ANSI 코드와 1:1 대응이 되어 ANSI로 바로 변환된다는 장점이 있습니다.
    2. rune type으로 한 문자 담기
        - 문자 하나를 표현하는데 rune 타입을 사용합니다. UTF-8은 한 글자가 1~3바이트 크기이기 때문에 UTF-8 문자값을 가지려면 3바이트가 필요합니다.
        - 하지만 Go 언어 기본 타입에서 3바이트 정수 타입은 제공되지 않기 때문에 rune 타입은 4바이트 정수 타입인 int32 타입의 별칭 타입입니다.
        - 코드
            
            ```go
            package main
            
            import "fmt"
            
            func main() {
            	var char rune = '한'
            	
            	fmt.Printf("%T\n", char) // char 타입 출력 - int32
            	fmt.Printf(char) // 54620
            	fmt.Printf("%c\n", char) // 문자 출력 - 한
            }
            ```
            
        - []rune 타입 변환으로 글자 수 알아내기
            - string type, rune slice type인 []rune type은 상호 타입 변환이 가능하다.
    3. 문자열 구조
        - string 구조
            - 내부 구현은 감춰져 있으나, reflect 패키지 안의 StringHeader 구조체를 통해 내부 구현을 엿볼 수 있다.
            
            ```go
            type StringHeader struct {
            	Data uintptr
            	Len int
            }
            ```
            
            string은 필드가 2개인 구조체입니다. 첫 번째 필드 Data는 uintptr 타입으로 문자열의 데이터가 있는 메모리 주소를 나타내는 일종의 포인터입니다. 두 번째 필드인 Len은 int 타입으로 문자열의 길이를 나타냅니다.
            
        - string끼리 대입하기
            
            ```go
            package main
            
            import "fmt"
            
            func main() {
            	str1 := "안녕하세요, 한글 문자열입니다."
            	str2 := str1
            
            	fmt.Printf(str1) // 안녕하세요, 한글 문자열입니다.
            	fmt.Printf("\n")
            	fmt.Printf(str2) // 안녕하세요, 한글 문자열입니다.
            }
            ```
            
            구조체 변수가 복사될 때 구조체 크기만큼 메모리가 복사됩니다. str1과 str2는 모두 구조체이므로 각 필드 즉 Data 포인터값과 Len값이 복사됩니다. 
            
            즉, str1의 Data와 Len 값만 str2에 복사됩니다.
            
            **→ 문자열이 아무리 길어도 16바이트 값만 복사될 뿐, 문자열 데이터는 복사되지 않음**
            
    4. immutable
        - 문자열을 슬라이스로 타입 변환을 할 때, 문자열을 복사해서 새로운 메모리 공간을 만들어 슬라이스가 가리키게 한다. → 불변 원칙 때문.
        - string 합 연산을 빈번하게 하면 메모리 낭비가 발생함(계속 새로운 메모리 할당이 발생) → strings 패키지의 Builder를 써라
        - 예기치 못한 버그 방지를 위해 문자열 불변 원칙을 지키려함
            - 언제라도 문자열이 변하게 되면 string 타입 변수를 안전하게 사용할 수 없는 경우가 발생

### CH16 패키지

- 패키지 정의, Go 모듈, 패키지 초기화
    1. 패키지
        - Go 언어에서 코드를 묶는 가장 큰 단위가 패키지다.
        - 겹치는 패키지 aliasing 주기
            
            ```go
            import (
            	"text/template"
            	htemplate "html/template"
            )
            
            template.New("foo).Parse(...)
            htemplate.New("foo).Parse(...)
            ```
            
        - 사용하지 않는 패키지 포함하기
            - 패키지를 가져오면 반드시 사용해야 합니다. import하고 사용하지 않으면 에러가 발생합니다.
            - 패키지를 직접 사용하지 않지만, 부가효과를 얻고자 임포트하는 경우에는 밑줄 _을 패키지명 앞에 붙여주면 됩니다.
            
            ```go
            import (
            	"database/sql"
            	_ "github.com/mattn/go-sqlite3" // 밑줄 _을 이용해서 오류 방지
            )
            ```
            
    2. Go 모듈
        - Go 패키지들을 모아놓은 Go 프로젝트 단위를 Go 모듈이라고 한다.
        - 모든 Go 코드는 Go 모듈 아래에 있어야 한다.
        - go build를 하려면 반드시 Go 모듈 루트 폴더에 go.mod 파일이 있어야 한다.
            - go build로 실행 파일을 만들 때 go.mod와 외부 저장소 패키지 버전 정보를 담고 있는 go.sum 파일을 통해 외부 패키지와 모듈 내 패키지를 합쳐서 실행 파일을 만들게 됩니다.
        - Go의 패키지명
            - 쉽고 간단하게 이름지을 것
            - 모든 문자를 소문자로 할 것을 권장
            - 패키지 전역으로 선언된 첫 글자가 대문자로 시작되는 모든 변수, 상수, 타입, 함수, 메서드는 패키지 외부로 공개
            - 구조체 이름의 첫 글자가 대문자이고 필드명 역시 첫 글자가 대문자인 구조체의 필드 역시 패키지 외부로 공개됨
    3. 패키지 초기화
        - 패키지 임포트하면 일어나는 과정
            - 컴파일러가 패키지 내의 전역 변수를 초기화
            - 그런 다음 패키지에 init() 함수가 있다면 호출해 패키지를 초기화함
                - init() 함수는 반드시 입력 매개변수가 없고 반환값도 없는 함수여야 함
                - 만약 어떤 패키지의 초기화 함수인 init() 함수 기능만 사용하기 원할 경우 밑줄 _을 이용해 임포트합니다.

### CH17 미니 프로젝트

스킵